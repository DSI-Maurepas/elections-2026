#!/bin/bash

# Arrêt immédiat en cas d’erreur
set -e

# Chemin de ton dépôt local
REPO_PATH="/c/dev/elections-municipales/src"

echo "➡️ Déplacement vers le dépôt local..."
cd "$REPO_PATH"

echo "➡️ Vérification que nous sommes bien dans un dépôt git..."
git rev-parse --is-inside-work-tree > /dev/null

echo "➡️ Passage sur la branche main..."
git checkout main

echo "➡️ Ajout de tous les fichiers..."
git add -A

echo "➡️ Commit forcé (si nécessaire)..."
git commit -m "Force update main from local workspace" || echo "ℹ️ Aucun changement à committer"

echo "⚠️ PUSH FORCE vers origin/main..."
git push origin main --force

echo "✅ Mise à jour distante TERMINÉE."
