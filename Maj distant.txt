Voici un script .sh pr√™t √† lancer, clair, comment√© et adapt√© √† Git Bash sous Windows, pour pousser ton d√©p√¥t local
C:/dev/elections-municipales vers GitHub / main.
_____________________________________________________________________________________________

üü¢ Script STANDARD (recommand√©)

‚û°Ô∏è Commit + push sans forcer (s√©curis√©)

üìÑ push_main.sh
#!/bin/bash

# Arr√™t imm√©diat en cas d‚Äôerreur
set -e

echo "=== D√©ploiement vers GitHub /main ==="

# 1. Se placer dans le d√©p√¥t
cd /c/dev/elections-municipales || {
  echo "‚ùå R√©pertoire introuvable"
  exit 1
}

# 2. V√©rifier la branche
CURRENT_BRANCH=$(git branch --show-current)
if [ "$CURRENT_BRANCH" != "main" ]; then
  echo "‚ùå Tu n'es pas sur la branche main (actuelle : $CURRENT_BRANCH)"
  exit 1
fi

# 3. Afficher l‚Äô√©tat
echo "=== √âtat du d√©p√¥t ==="
git status

# 4. Ajouter tous les fichiers
git add .

# 5. Commit (message horodat√©)
COMMIT_MSG="Update $(date '+%Y-%m-%d %H:%M')"
git commit -m "$COMMIT_MSG" || echo "‚ÑπÔ∏è Rien √† committer"

# 6. Push
git push origin main

echo "‚úÖ Push termin√© avec succ√®s"

_____________________________________________________________________________________________

üî¥ Script FORC√â (√† utiliser en connaissance de cause)

‚û°Ô∏è √âcrase origin/main avec ton local

üìÑ push_main_force.sh
#!/bin/bash

set -e

echo "‚ö†Ô∏è PUSH FORC√â VERS origin/main ‚ö†Ô∏è"

cd /c/dev/elections-municipales || exit 1

CURRENT_BRANCH=$(git branch --show-current)
if [ "$CURRENT_BRANCH" != "main" ]; then
  echo "‚ùå Tu n'es pas sur main"
  exit 1
fi

git status
read -p "‚ùó Confirmer le push forc√© ? (oui/NON) : " CONFIRM
if [ "$CONFIRM" != "oui" ]; then
  echo "‚ùå Annul√©"
  exit 0
fi

git add .
git commit -m "Force update $(date '+%Y-%m-%d %H:%M')" || true
git push origin main --force

echo "‚úÖ Push forc√© termin√©"

_____________________________________________________________________________________________

‚ñ∂Ô∏è Utilisation

Dans Git Bash :

chmod +x push_main.sh
./push_main.sh


ou

chmod +x push_main_force.sh
./push_main_force.sh

_____________________________________________________________________________________________

üß† Recommandation pro (√©lections)

Avant un gros push :

git tag backup-$(date '+%Y%m%d-%H%M')
git push origin --tags

üëâ Tu conserves une trace officielle.